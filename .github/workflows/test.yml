name: 🧅 Test Perl Action
on:
  push:
    branches: ['*']
jobs:
  test:
    strategy:
      matrix:
        include:
          - { icon: 🐧, os: ubuntu,  name: Linux }
          - { icon: 🍎, os: macos,   name: macOS }
          - { icon: 🪟, os: windows, name: Windows }
    name: ${{ matrix.icon }} ${{ matrix.name }}
    runs-on: ${{ matrix.os }}-latest
    steps:
      - uses: actions/checkout@v4
      - name: Setup Perl
        id: perl
        uses: shogo82148/actions-setup-perl@v1
        with: { perl-version: latest }
      - if: runner.os == 'Linux'
        run: sudo apt-get install -qq aspell-en language-pack-fr
      # - if: runner.os == 'Windows'
      #   run: Install-Language fr-FR
      - name: en-US
        env: { LC_ALL: "${{ runner.os == 'Windows' && 'English_United States.UTF-8' || 'en_US.UTF-8' }}" }
        run: perl -MPOSIX -E 'use Test::More tests => 1; is POSIX::setlocale(POSIX::LC_ALL), $ENV{LC_ALL}'
      - name: fr-FR
        env: { LC_ALL: "${{ runner.os == 'Windows' && 'English_United States.UTF-8' || 'fr_FR.UTF-8' }}" }
        run: perl -MPOSIX -E 'use Test::More tests => 1; is POSIX::setlocale(POSIX::LC_ALL), $ENV{LC_ALL}'
